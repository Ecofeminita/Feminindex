<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />
  <title>Femindex</title>



  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">



  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>

</head>


<body>



<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   version="1.1"
   id="svg10"
   xml:space="preserve"
   width="531.12933"
   height="844.44397"
   viewBox="0 0 531.12933 844.44397"
   sodipodi:docname="MarcoTarjeta.svg"
   inkscape:version="0.92.2 (5c3e80d, 2017-08-06)"><metadata
     id="metadata16"><rdf:RDF><cc:Work
         rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs
     id="defs14" /><sodipodi:namedview
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1"
     objecttolerance="10"
     gridtolerance="10"
     guidetolerance="10"
     inkscape:pageopacity="0"
     inkscape:pageshadow="2"
     inkscape:window-width="1920"
     inkscape:window-height="1017"
     id="namedview12"
     showgrid="false"
     inkscape:zoom="1.4235184"
     inkscape:cx="457.67468"
     inkscape:cy="232.00096"
     inkscape:window-x="-8"
     inkscape:window-y="-8"
     inkscape:window-maximized="1"
     inkscape:current-layer="gMachifrase"
     inkscape:snap-bbox="true" />
<g
     id="MarcoTarjeta"
     transform="matrix(1.3333333,0,0,-1.3333333,0,844.444)"><path
       d="M 0,0 H 398.346 V 632.773 H 0 Z"
       style="fill:#cec4cd;fill-opacity:1;fill-rule:nonzero;stroke:none"
       id="fondoTotal"
       inkscape:connector-curvature="0" />
       <g
       id="fondoILabels"
       inkscape:label="#fondoLabels"><path
         d="m 18.131,324.8756 v 29.32 c 0,1.588 1.287,2.876 2.876,2.876 h 354.502 c 1.588,0 2.875,-1.288 2.875,-2.876 v -29.32 c 0,-1.588 -1.287,-2.876 -2.875,-2.876 H 21.007 c -1.589,0 -2.876,1.288 -2.876,2.876"
         style="fill:#ede5ed;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path32"
         inkscape:connector-curvature="0" /><path
         d="m 18.131,283.5422 v 29.32 c 0,1.588 1.287,2.876 2.876,2.876 h 354.502 c 1.588,0 2.875,-1.288 2.875,-2.876 v -29.32 c 0,-1.588 -1.287,-2.876 -2.875,-2.876 H 21.007 c -1.589,0 -2.876,1.288 -2.876,2.876"
         style="fill:#ede5ed;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path36"
         inkscape:connector-curvature="0" /><path
         d="m 18.131,242.2089 v 29.32 c 0,1.588 1.287,2.876 2.876,2.876 h 354.502 c 1.588,0 2.875,-1.288 2.875,-2.876 v -29.32 c 0,-1.588 -1.287,-2.876 -2.875,-2.876 H 21.007 c -1.589,0 -2.876,1.288 -2.876,2.876"
         style="fill:#ede5ed;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path40"
         inkscape:connector-curvature="0" /><path
         d="m 18.131,200.8756 v 29.32 c 0,1.588 1.287,2.876 2.876,2.876 h 354.502 c 1.588,0 2.875,-1.288 2.875,-2.876 v -29.32 c 0,-1.588 -1.287,-2.876 -2.875,-2.876 H 21.007 c -1.589,0 -2.876,1.288 -2.876,2.876"
         style="fill:#ede5ed;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path44"
         inkscape:connector-curvature="0" /><path
         d="m 18.131,159.5422 v 29.32 c 0,1.588 1.287,2.876 2.876,2.876 h 354.502 c 1.588,0 2.875,-1.288 2.875,-2.876 v -29.32 c 0,-1.588 -1.287,-2.876 -2.875,-2.876 H 21.007 c -1.589,0 -2.876,1.288 -2.876,2.876"
         style="fill:#ede5ed;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="path48"
         inkscape:connector-curvature="0" /></g>


         <text
       transform="matrix(1,0,0,-1,185.3335,490.0972)"
       style="font-variant:normal;font-weight:bold;font-stretch:normal;font-size:23px;font-family:'Sequentialist BB';-inkscape-font-specification:SequentialistBB-Bold;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
       id="nombreCandidato"
       inkscape:label="#nombreCandidato">

    </text>


<text
       transform="matrix(1,0,0,-1,255.9097,533.3364)"
       style="font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.22070026px;font-family:'Sequentialist BB';-inkscape-font-specification:SequentialistBB;writing-mode:lr-tb;display:inline;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
       id="text58"
       inkscape:label="labelsTop"><tspan
         x="-70.574539 -63.779835 -58.378284 -52.182388 -44.886631 -39.26511 -31.969351 -27.385366 -22.92481 -14.17479 -11.388471 -5.9869208"
         sodipodi:role="line"
         id="tspan54">CANDIDATX:</tspan><tspan
         x="-70.574539 -63.278786 -57.657261 -52.341259 -47.233006 -41.354847 -35.733326 -31.272772 -22.522751"
         y="16.24131"
         sodipodi:role="line"
         id="tspan56">DISTRITO:</tspan></text>
<text
       transform="matrix(1,0,0,-1,185.3335,394.437)"
       style="font-variant:normal;font-weight:normal;font-stretch:normal;font-size:14.38799953px;font-family:'Sequentialist BB';-inkscape-font-specification:SequentialistBB;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
       id="partido"></text>
<text
       transform="matrix(1,0,0,-1,25.3335,333.8262)"
       style="font-variant:normal;font-weight:normal;font-stretch:normal;font-size:19px;font-family:'Sequentialist BB';-inkscape-font-specification:SequentialistBB;writing-mode:lr-tb;fill:#754373;fill-opacity:1;fill-rule:nonzero;stroke:none"
       id="labelsPuntajes"><tspan
         x="0 11.343 19.684 28.443001 36.784 47.348 56.449001 70.053001 78.318001 82.650002 91.408997 99.75 107.825 116.641 130.245 141.588 150.746 160.87489 168.81689 177.5569 185.4039 199.0079 207.2729"
         y="0"
         sodipodi:role="line"
         id="tspan64">DERECHOS REPROD.:</tspan><tspan
         x="0 7.448 15.846 24.985001 33.724998 45.068001 53.466 64.808998"
         y="41.325001"
         sodipodi:role="line"
         id="tspan66">PARIDAD:</tspan><tspan
         x="0 8.3409996 18.905001 32.508999 42.141998 55.745998 68.323997 76.892998 85.291 89.623001 97.204002 105.545 118.123 126.863 136.496 145.23599 153.50101 159.923 168.321"
         y="82.650002"
         sodipodi:role="line"
         id="tspan68">ECONOMÍA FEMINISTA:</tspan><tspan
         x="0 7.0300002 18.809999 28.006001 34.352001"
         y="123.975"
         sodipodi:role="line"
         id="tspan70">LGBT:</tspan><tspan
         x="0 9.6330004 18.372999 27.531 37.164001 45.562 58.139999 66.481003 76.113998 89.718002 97.983002"
         y="165.3"
         sodipodi:role="line"
         id="tspan72">NIUNAMENOS:</tspan></text>
<text
       transform="matrix(1,0,0,-1,239.0464,517.0977)"
       style="font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.22070026px;font-family:'Sequentialist BB';-inkscape-font-specification:SequentialistBB;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
       id="distrito"></text>
<path
       inkscape:connector-curvature="0"
       id="fondoPhoto"
       style="fill:#ede5ed;fill-opacity:1;fill-rule:nonzero;stroke:none"
       d="m 18.131,374.0067 v 201.987 c 0,1.588 1.287,2.875 2.876,2.875 H 171.34 c 1.588,0 2.875,-1.287 2.875,-2.875 v -201.987 c 0,-1.588 -1.287,-2.876 -2.875,-2.876 H 21.007 c -1.589,0 -2.876,1.288 -2.876,2.876" /><path
       inkscape:connector-curvature="0"
       id="path94"
       style="fill:none;stroke:#919ca7;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
       d="M 18.131,589.3333 H 378.836" /><path
       inkscape:connector-curvature="0"
       id="path98"
       style="fill:none;stroke:#919ca7;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
       d="M 18.131,620.6667 H 378.836" /><path
       inkscape:connector-curvature="0"
       id="path102"
       style="fill:none;stroke:#919ca7;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
       d="M 18.131,23.3333 H 378.836" /><text
       transform="matrix(1,0,0,-1,97.7041,598.666)"
       style="font-variant:normal;font-weight:bold;font-stretch:normal;font-size:19px;font-family:'Sequentialist BB';-inkscape-font-specification:SequentialistBB-Bold;writing-mode:lr-tb;fill:#dc244a;fill-opacity:1;fill-rule:nonzero;stroke:none"
       id="titulo"><tspan
         x="0 10.07 19.532 31.691999 47.215 58.083 73.606003 87.627998 92.073997 102.182 107.445 116.033 124.697 138.71899 143.146 154.01401 158.44099 165.28101 174.66701 182.058 189.677 199.785"
         y="0"
         sodipodi:role="line"
         id="tspan104">{Economía femini(s)ta}</tspan></text>
<text
       transform="matrix(1,0,0,-1,95.186,7.333)"
       style="font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;font-family:'Sequentialist BB';-inkscape-font-specification:SequentialistBB;writing-mode:lr-tb;fill:#754373;fill-opacity:1;fill-rule:nonzero;stroke:none"
       id="url"><tspan
         x="0 8.592 17.184 25.056 28.356001 33.743999 40.956001 50.004002 56.52 65.568001 73.919998 76.800003 82.896004 88.127998 93.515999 101.868 104.748 111.264 114.144 118.872 124.968 128.26801 135.48 144.528 152.88 158.136 163.368 168.756 177.108 179.98801 186.504 189.384 195.89999 203.868 209.256"
         y="0"
         sodipodi:role="line"
         id="tspan108">www.economiafeminita.com/feminindex</tspan></text>




<g
       id="gMachifrase"
       inkscape:label="#gMachifrase"><text
         id="text122"
         style="font-variant:normal;font-weight:normal;font-stretch:normal;font-size:14.63899994px;font-family:'Sequentialist BB';-inkscape-font-specification:SequentialistBB;writing-mode:lr-tb;fill:#754373;fill-opacity:1;fill-rule:nonzero;stroke:none"
         transform="matrix(1,0,0,-1,51.6675,37.0391)"><tspan
           id="tspan120"
           sodipodi:role="line"
           y="0"
           x="0 9.6910181 16.161455 24.300739 31.31282 38.046761 43.887722 50.929081 57.150658 63.51862">MACHIFRASE</tspan></text>
<image
         sodipodi:absref="C:\_WORK\ecofeminita\femindex\cucardas_machitroll.png"
         y="-145.54262"
         x="31.470772"
         id="Machifrase"
         xlink:href="cucardas_machitroll.png"
         preserveAspectRatio="none"
         height="93.373329"
         width="100.98152"
         transform="scale(1,-1)"
         inkscape:label="#Machifrase" />
<text
       transform="matrix(1,0,0,-1,130,105)"
       style="font-variant:normal;font-weight:normal;font-stretch:normal;font-size:14.38799953px;font-family:'Sequentialist BB';-inkscape-font-specification:SequentialistBB;writing-mode:lr-tb;fill:#754373;    font-style: italic;fill-opacity:1;fill-rule:nonzero;stroke:none"
       id="machifraseText"></text>

         </g>


         
         <g
       id="gMenstru">



       <image
         sodipodi:absref="C:\_WORK\ecofeminita\femindex\cucardas_ecofemi.png"
         y="-144.66666"
         x="153.13741"
         id="menstruImage"
         xlink:href="cucardas_ecofemi.png"
         preserveAspectRatio="none"
         height="90.547752"
         width="97.925705"
         transform="scale(1,-1)"
         inkscape:label="#menstruImage" />

  <text
         id="text142"
         style="font-variant:normal;font-weight:normal;font-stretch:normal;font-size:14.63899994px;font-family:'Sequentialist BB';-inkscape-font-specification:SequentialistBB;writing-mode:lr-tb;fill:#dc244a;fill-opacity:1;fill-rule:nonzero;stroke:none"
         transform="matrix(1,0,0,-1,155.6089,37.0391)"><tspan
           id="tspan140"
           sodipodi:role="line"
           y="0"
           x="0 9.6910181 15.678369 23.041786 29.160889 35.470299 42.540936 49.670128">MenstruaCCiÓn</tspan></text>
</g>



<g
       id="gPropuesta">


       <image
         sodipodi:absref="C:\_WORK\ecofeminita\femindex\cucardas_diploma.png"
         y="-144.66666"
         x="270.21603"
         id="propuestaImage"
         xlink:href="cucardas_diploma.png"
         preserveAspectRatio="none"
         height="90.737144"
         width="98.130547"
         transform="scale(1,-1)"
         inkscape:label="propuestaImage" /><text
         id="text154"
         style="font-variant:normal;font-weight:normal;font-stretch:normal;font-size:14.63899994px;font-family:'Sequentialist BB';-inkscape-font-specification:SequentialistBB;writing-mode:lr-tb;fill:#dc244a;fill-opacity:1;fill-rule:nonzero;stroke:none"
         transform="matrix(1,0,0,-1,293.458,37.0391)"><tspan
           id="tspan152"
           sodipodi:role="line"
           y="0"
           x="0 6.2215748 13.014071 23.495596 29.717171 36.773167 43.199688 49.567654 54.517101 60.737209">PROPUESTAS</tspan></text>
</g>
<image
       sodipodi:absref="C:\_WORK\ecofeminita\femindex\fotos\andrea-datri.jpg"
       xlink:href=""
       inkscape:label="#ImagenCandidato"
       transform="scale(1,-1)"
       width="144.71078"
       height="193.46078"
       preserveAspectRatio="none"
       id="ImagenCandidato"
       x="23.007305"
       y="-572.84778"><title
         id="title3896">ImagenCandidato</title></image><text
       y="-533.2959"
       x="254.63577"
       style="font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.22069931px;font-family:'Sequentialist BB';-inkscape-font-specification:SequentialistBB;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.99999994"
       id="candidatura"
       transform="scale(1,-1)"></text>

<g id="puntajes" style="font-size:34px;line-height:1.25;font-family:'Sequentialist BB'">



</g></svg>
<!--    <script src="https://cdn.rawgit.com/eligrey/FileSaver.js/e9d941381475b5df8b7d7691013401e171014e89/FileSaver.min.js"></script>
  <script src="https://cdn.rawgit.com/eligrey/canvas-toBlob.js/f1a01896135ab378aa5c0118eadd81da55e698d8/canvas-toBlob.js"></script> -->
  <script src="js/saveSvgAsPng.js"></script>
<div>
<button id='saveButton'>Export my D3 visualization to PNG</button>

<a href="#" id="next" style="font-size: 30px; background-color: silver; width: 200px; margin: auto; text-align: center; display: block">Próxima</a>
</div>
  <!--  Scripts-->



   <script>

 var width="531";
  var height="844";
 var svg = d3.select("svg");


var colorea = d3.scaleLinear()
    .domain([-10,0,10])
    .range(["rgb(253, 81, 38)", "rgb(255, 204, 0)", "rgb(51, 153, 0)"]);

var colorScale = d3.scaleOrdinal()

var resultadea =  d3.scaleQuantize()
  .domain([-10, 10])
  .range(["11111000000","01111000000","00111000000","00011000000","00001000000", "00000000000", "00000010000", "00000011000", "00000011100", "00000011110", "00000011111"]);


var colorScale = d3.scaleOrdinal()
    .domain(["unidad ciudadana", "cumplir", "cambiemos", "frente de izquierda", "evolución", "1 país"])
    .range(["rgb(30, 174, 218)", "rgb(52, 91, 119", "rgb(232, 173, 4)", "rgb(230, 64, 47)", "rgb(139, 195, 74)", "rgb(72, 124, 220)"])
    .unknown(["grey"]);
    





var indiceActual = 1;



var respuestas = [['En desacuerdo',"No","Entre 30 y 39% de mujeres"],
                  ['Se Abstiene',"","Entre 40 y 50% de mujeres"],
                  ['De acuerdo',"Si","Más de 50% de mujeres"]
                  ];

var candidatoActual = 0, candidatoActualName = "";





d3.csv("data2.csv", function(error, dataImported) {
  if (error) throw error;

 
var preguntas;
var data = [];


 dataImported.forEach(function(d,i){
                data[i] = [];
                data[i].name = d['Datos del candidatx'];
                data[i].puesto = d['Puesto al que se presenta'];
                data[i].partido = d['Partido'].replace(/\s+$/, '');
                data[i].distrito = d['Distrito'].replace(/\s+$/, '');
                data[i].image = d['FOTO'];
                data[i].preguntas = [];
                data[i].indices = [];

                for (var iii = 1; iii < 6; iii++) {
                data[i].indices[iii] = parseFloat(d['t' + iii])*10;  
                }
                data[i].indices.shift();

                for (var ii = 1; ii < 18; ii++) {
                data[i].preguntas[ii] = parseFloat(d[ii]);  
                }
                data[i].machiFrase = d['¿Realizó en su campaña alguna declaración machista, misógina o en contra de la igualdad de género? (si la respuesta es afirmativa mencionar cuál)']
})






// Set-up the export button
d3.select('#saveButton').on('click', function(){
   updateTarjeta(data,candidatoActual)

saveSvgAsPng(document.getElementById("svg10"), "Carta_"+ camelize(candidatoActualName) +".png");

 candidatoActual++;
});

$('#next').on('click', function(){
 candidatoActual++;
if(candidatoActual == data.length) candidatoActual = 0;

 updateTarjeta(data,candidatoActual)


});


}); // END CSV





function updateTarjeta(data, candidatoSelected){

candidatoActualName = data[candidatoSelected].name;


d3.select("#gMachifrase").style("display","none");
d3.select("#gPropuesta").style("display","none");
d3.select("#gMenstru").style("display","none");

if(data[candidatoSelected].preguntas[17] == -1) {
  d3.select("#gMachifrase").style("display","");
  d3.select("#machifraseText").text(data[candidatoSelected].machiFrase).call(wrap,[140,13]);

}
if(data[candidatoSelected].preguntas[16] == 1) d3.select("#gPropuesta").style("display","");
if(data[candidatoSelected].preguntas[15] == 1) d3.select("#gMenstru").style("display","");




d3.select("#ImagenCandidato").attr("xlink:href","fotos/" + data[candidatoSelected].image);

d3.select("#nombreCandidato").html("");
d3.select("#distrito").html("");
d3.select("#candidatura").html("");
d3.select("#partido").html("");

d3.select("#nombreCandidato").append("tspan").text(data[candidatoSelected].name).call(wrap,[210,20]);
d3.select("#distrito").append("tspan").text(data[candidatoSelected].distrito);
d3.select("#candidatura").append("tspan").text(data[candidatoSelected].puesto);
d3.select("#partido").append("tspan").text(data[candidatoSelected].partido).call(wrap,[200,12]);


var proximo;

if(candidatoSelected < data.length-1){

    proximo = candidatoSelected +1;
    console.log(proximo);
     d3.select("#next").html(data[proximo].name);
} 

 

var origin =[];
origin.x="235.73672";
origin.y="-329.1055";

var resultados =data[candidatoSelected].indices;


d3.select("#puntajes").html("");

var puntajesText = d3.select("#puntajes").selectAll("text")
      .data(resultados).enter()
      .append("text")
      .attr("transform","scale(1,-1)")
      .attr("x",origin.x)
      .attr("y", function(d,k){
        return (parseInt(origin.y) + (41.2 * k))});

      puntajesText.each(function(d){
        var este =  d3.select(this);
        var result = resultadea(d);
        var inner ="‹‹‹‹‹x›››››";
        for (var ii = 0; ii <= inner.length; ii++) {
        	var contiene = inner[ii];
        	if (ii == 5) {
        		contiene = Math.round(d);
        		if (Math.round(d) >0) contiene = "+"+Math.round(d)
        		contiene = "•";

        	}
          este.append("tspan").text(contiene)
          .style("fill", function(r){
          	if(ii == 5) return "rgb(228, 161, 24)";
            if(!parseInt(result[ii])) return "#cec4cd";
            if(ii<5) return "#e44318";
            if(ii>5) return "#09ad3f";
            

          });

        }
      })


}    



function camelize(str) {
  if(str) return str.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g, function(match, index) {
    if (+match === 0) return ""; // or if (/\s+/.test(match)) for white spaces
    return index == 0 ? match.toLowerCase() : match.toUpperCase();
  });
}



function wrap(text, width) {
  text.each(function() {
    var text = d3.select(this),
        words = text.text().split(/\s+/).reverse(),
        word,
        line = [],
        lineNumber = 0,
        lineHeight = width[1], // ems
        y = text.attr("y"),
        dy = 0,//parseFloat(text.attr("dy")),
        tspan = text.text(null).append("tspan").attr("x", 0).attr("y", y).attr("dy", dy + "em");
    while (word = words.pop()) {
      line.push(word);
      tspan.text(line.join(" "));
      if (tspan.node().getComputedTextLength() > width[0]) {
        line.pop();
        tspan.text(line.join(" "));
        line = [word];
        tspan = text.append("tspan").attr("x", 0).attr("y", y).attr("y", ++lineNumber * lineHeight + dy + "px").text(word);
      }
    }
  });
}


function type(d) {
  if (!d.value) return;
  d.value = +d.value*10;
  return d;
}



  </script>

  </body>
</html>
